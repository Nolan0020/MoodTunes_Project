<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoodTunes</title>
    <link rel="stylesheet" href="Playlistsong.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo"><img src="logo.png" >MoodTunes</div>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="library.html">Mood-based Jams</a></li>
                    <li><a href="playlist.html">Playlists</a></li>
                    <li><a href="likesong.html">Liked Songs</a></li>
                    <li><a href="history.html">Recent Plays</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <div class="search-bar">
                    <input type="text" id="search-bar" placeholder="Search for artists, songs, or moods">
                    <button id="search-btn">Search</button>
                </div>
                <div id="search-results" class="search-results">
                    <ul id="search-results-list">
                        
                    </ul>
                </div>
                <div class="user-profile">
                    <span class="user-name"></span>
                    <img src="playlist/profile2.png" alt="User Profile" class="profile-pic">
                    <button id="logout-btn">Logout</button>
                </div>
            </header>

            <div class="header">
                <h1>Hey There!</h1>
            </div>
            <section class="upper-content">
                <div class="box1">
                    <a href="90s.html">
                    <img src="playlist/90.jpg" alt="Playlist 1">
                </a>
                    <p>90's Song</p>
                </div>


                <div class="box1">
                    <a href="love.html">
                    <img src="playlist/love.jpg" alt="Playlist 2">
                </a>
                    <p>Love & ChillS</p>
                </div>
                <div class="box1">
                    <img src="playlist/hit.jpg" alt="Recommended Albums">
                    <p>Hot Hit</p>
                </div>
            </section>
            <section class="lower-content">
                <div class="box1">
                    <a href="sleep.html">
                    <img src="playlist/slep.jpg" alt="playlist 3">
                </a>
                    <p>Sleepy&Dreamy</p>

                    </div>
                <div class="box1">
                    <a href="road.html">
                    <img src="playlist/road.jpg" alt="Playlist 4">
                    </a>
                    <p>Road Trips</p>
                </div>
                <div class="box1">
                    <a href="party.html">
                    <img src="playlist/party.jpg" alt="Playlist 5">
                    </a>
                    <p>Party Mood</p>
                </div>
            </section>

            <section class="featured-content">
                <h1>MoodTunes Playlists</h1>
                <div class="playlist-grid">
                    <div class="playlist-card" data-playlist="happy">
                        <a href="happy.html">
                            <img src="playlist/happpp.jpg" alt="Road Trip">
                            <h3>Happy VibesüòÉ</h3>
                        </a>
                    </div>
                    <div class="playlist-card" data-playlist="sad">
                        <a href="90s.html" >
                        <img src="playlist/900.jpg" alt="Sad Playlist">
                        <h3>Classic MoodüèõÔ∏è</h3>
                        </a>
                    </div>
                    <div class="playlist-card" data-playlist="energetic">
                        <a href="party.html" >
                        <img src="playlist/partyy.jpg" alt="Energetic Playlist">
                        <h3>Party Vibesü™©</h3>
                        </a>
                    </div>
                    <div class="playlist-card" data-playlist="chill">
                        <a href="road.html" >
                        <img src="playlist/rooood.jpg" alt="Chill Playlist">
                        <h3>road Tripüõ£Ô∏è</h3>
                        </a>
                    </div>
                    <div class="playlist-card" data-playlist="trips">
                        <a href="sad.html" >
                        <img src="playlist/saddd.jpg" alt="trip Playlist">
                        <h3>Melancholyü•≤</h3>
                        </a>
                    </div>
                    <div class="playlist-card" data-playlist="party">
                        <a href="sleep.html" >
                        <img src="playlist/sleeee.jpg" alt="party Playlist">
                        <h3>Dreamyüí§</h3>
                        </a>
                    </div>
                    <div class="playlist-card" data-playlist="Romantic">
                        <a href="love.html">
                        <img src="playlist/lovvvvvvv.jpg" alt="Romantic Playlist">
                        <h3>Love ChillSüåπ</h3>
                        </a>
                    </div>
                    <div class="playlist-card" data-playlist="workout">
                        <a href="energy.html" >
                        <img src="playlist/ener.jpg" alt="workout Playlist">
                        <h3>Energy Boost‚ö°</h3>
                        </a>
                    </div>
                </div>
            </section>

            <section class="song-list">
                <h2>Songs</h2>
                <ul id="song-list-ul">
                    <!-- Songs will be dynamically added here -->
                </ul>
            </section>

            <br>
            <h2>Trending Songs </h2>
            <div class="card-container">
                <div class="card" data-song-title="Paro" data-song-artist="Aditya Rikhari UNPLG'd" data-song-src="songs/Aditya Rikhari - Paaro (Official Video) [DxsDekHDKXo].mp3" onclick="playsong(this)">
                    <img src="playlist/par.jpg" alt="" class="card-img">
                    <p class="card-title">Paro</p>
                    <p class="card-info">Aditya Rikhari UNPLG'd</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card" onclick="playsong(this)"
                     data-song-title="Ticket to Love"
                     data-song-artist="Abhi Kesla, Bella"
                     data-song-src="Bella.mp3">
                    <img src="playlist/bel.jpg" alt="" class="card-img">
                    <p class="card-title">Ticket to Love</p>
                    <p class="card-info">Abhi Kesla, Bella</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card" 	onclick="playsong(this)"
                     data-song-title="Chand"
                     data-song-artist="Krrish Rao, Swara Verma, Chahat Yahav"
                     data-song-src="CHAND.mp3">
                    <img src="./playlist/cha.jpg" alt="" class="card-img">
                    <p class="card-title">Chand</p>
                    <p class="card-info">Krrish Rao, Swara Verma, Chahat Yahav</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card" onclick="playsong(this)"
                     data-song-title="Husn"
                     data-song-artist="Anuv Jain"
                     data-song-src="songs/Anuv Jain - HUSN (Official Video) [gJLVTKhTnog].mp3">
                    <img src="./playlist/husun.jpg" alt="" class="card-img">
                    <p class="card-title">Husn</p>
                    <p class="card-info">Anuv Jain</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card" onclick="playsong(this)"
                     data-song-title="Finding Her"
                     data-song-artist="Kushagar,Bharath,Saaheal"
                     data-song-src="songs/Finding Her (Official Video) _ Kushagra _ Vanshika Kashyap _ Bharath _ UR Debut [3Cp2QTBZAFQ].mp3">
                    <img src="./playlist/find.jpg" alt="" class="card-img">
                    <p class="card-title">Finding Her</p>
                    <p class="card-info">Kushagar,Bharath,Saaheal </p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card" onclick="playsong(this)"
                data-song-title="hot hit panjabi"
                data-song-artist="karan Aujla"
                data-song-src="songs/karan Aujla - hot hit panjabi (Official Video) [2X0v1x4g3aE].mp3">
                    <img src="./playlist/pun.jpg" alt="" class="card-img">
                    <p class="card-title">hot hit panjabi</p>
                    <p class="card-info">Catch the hottest Punjabi - by MoodTunes ....</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card" onclick="playsong(this)"
                     data-song-title="Anxiety"
                     data-song-artist="Doechii"
                     data-song-src="songs/Doechii - Anxiety (Visualizer) [egemoVK0IKY].mp3">
                    <img src="./playlist/Anx.jpg" alt="" class="card-img">
                    <p class="card-title">Anxiety</p>
                    <p class="card-info">Doechii</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
            </div>

            <h2>Recommended for today</h2>
            <div class="card-container">
                <div class="card" onclick="playsong(this)"
                     data-song-title="Halka Halka"
                     data-song-artist="Sunidhi Chauhan"
                     data-song-src="songs/song1.mp3">
                    <img src="playlist/img1.jpg" alt="" class="card-img">
                    <p class="card-title">Halka Halka</p>
                    <p class="card-info"> Single by Sunidhi Chauhan</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card"onclick="playsong(this)"
                     data-song-title="Mahahetvali"
                     data-song-artist="Aditya Gadhvi"
                     data-song-src="songs/song2.mp3">
                    <img src="playlist/img2.jpg" alt="" class="card-img">
                    <p class="card-title">Mahahetvali </p>
                    <p class="card-info">Mahahetvali - Single by Aditya Gadhvi </p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card"onclick="playsong(this)"
                     data-song-title="Malang Sajna"
                     data-song-artist="Sachet Tandon"
                     data-song-src="songs/song3.mp3">
                    <img src="playlist/img3.jpg" alt="" class="card-img">
                    <p class="card-title">Malang Sajna</p>
                    <p class="card-info">Malang Sajna - Single by Sachet Tandon</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card"onclick="playsong(this)"
                     data-song-title="Tum Prem Ho"
                     data-song-artist="Mohit gitLalwani"
                     data-song-src="songs/song4.mp3">
                    <img src="playlist/img4.jpg" alt="" class="card-img">
                    <p class="card-title">Tum Prem Ho</p>
                    <p class="card-info">lyrics by Mohit gitLalwani</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card"onclick="playsong(this)"
                     data-song-title="Moti Veraana"
                     data-song-artist="Aditya Gadhvi"
                     data-song-src="songs/song5.mp3">
                    <img src="playlist/img5.jpg" alt="" class="card-img">
                    <p class="card-title">Moti Veraana </p>
                    <p class="card-info">Aditya Gadhvi best audio songs </p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card"onclick="playsong(this)"
                     data-song-title="Love Ni Bhavai"
                     data-song-artist="Sachin-jigar,Niren bhatt"
                     data-song-src="songs/song6.mp3">
                    <img src="playlist/img6.jpg" alt="" class="card-img">
                    <p class="card-title">Love Ni Bhavai </p>
                    <p class="card-info">Sachin-jigar,Niren bhatt</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <div class="card"onclick="playsong(this)"
                     data-song-title="Tari Madh Mithi"
                     data-song-artist="jigardhan gadhavi"
                     data-song-src="songs/song7.mp3">
                    <img src="playlist/img7.jpg" alt="" class="card-img">
                    <p class="card-title">Tari Madh Mithi </p>
                    <p class="card-info">jigardhan gadhavi</p>
                    <div class="card-actions">
                        <span class="add-to-playlist-btn"><i class="fa-solid fa-plus"></i></span>
                        <span class="like-song-btn"><i class="fa-regular fa-heart"></i></span>
                    </div>
                </div>
                <br>
            </div>
            <h2>Based on your recent listening </h2>
            <div class="card-container">
                <div class="card">
                    <img src="playlist/rec.jpg" alt="" class="card-img">
                    <p class="card-title">Filmy Hangover</p>
                    <p class="card-info">soothe your hangover with these chill track</p>
                </div>
                <div class="card">
                    <img src="playlist/rec2.jpg" alt="" class="card-img">
                    <p class="card-title">Amitabh Bhat</p>
                    <p class="card-info">the essential tracks panned down</p>
                </div>
                <div class="card">
                    <img src="playlist/rec3.jpg" alt="" class="card-img">
                    <p class="card-title">Starring Ali...</p>
                    <p class="card-info">essential tracks of alia bhatt all in one </p>
                </div>
                <div class="card">
                    <img src="playlist/rec4.jpg" alt="" class="card-img">
                    <p class="card-title">Winter of Love</p>
                    <p class="card-info">get nosy and snuggle with thse hindi...</p>
                </div>
            </div>
            <br>

            
        </main>

        <footer class="player">
            <div class="song-details">
                <img src="default-song-cover.jpg" alt="Song Cover" id="song-cover">
                <div class="song-info">
                    <span id="song-title">Song Title</span>
                    <span id="artist-name">Artist Name</span>
                </div>
            </div>
            <div class="controls">
                <button id="prev-btn" onclick="playPreviousSong()">‚èÆ</button>
                <button id="play-pause-btn" onclick="togglePlayPause()">‚ñ∂</button>
                <button id="next-btn" onclick="playNextSong()">‚è≠</button>
            </div>
            <div class="progress-bar">
                <input type="range" id="progress" min="0" max="100" value="0">
                <div class="time-left" id="time-left">0:00</div>
            </div>
        </footer>
    <audio id="audioPlayer"></audio>
    </div>
    </div>
    <br>


   <script src="script.js"></script>
   <script>
       function performSearch() {
           const query = document.getElementById('search-bar').value.trim().toLowerCase();
           const resultsList = document.getElementById('search-results-list');
           resultsList.innerHTML = ''; // Clear previous results

           if (!query) {
               resultsList.innerHTML = '<li>No results found. Please enter a search term.</li>';
               return;
           }

           const results = searchSongs(query); // Calls the searchSongs function from library.js

           if (results.length === 0) {
               resultsList.innerHTML = '<li>No results found.</li>';
           } else {
               results.forEach(song => {
                   const li = document.createElement('li');
                   li.textContent = `${song.title} - ${song.artist || 'Unknown Artist'} (${song.mood})`;
                   li.style.cursor = 'pointer';
                   li.dataset.songTitle = song.title;
                   li.dataset.songArtist = song.artist || 'Unknown Artist';
                   li.dataset.songSrc = song.src || '';
                   li.dataset.songCover = song.cover || 'default-song-cover.jpg';

                   li.addEventListener('click', () => {
                       const songData = {
                           title: li.dataset.songTitle,
                           artist: li.dataset.songArtist,
                           src: li.dataset.songSrc,
                           cover: li.dataset.songCover
                       };
                       playSong(songData); // Use the playSong function from script.js
                   });

                   resultsList.appendChild(li);
               });
           }
       }

       document.getElementById('search-btn').addEventListener('click', performSearch);

       document.getElementById('search-bar').addEventListener('keypress', function (event) {
           if (event.key === 'Enter') {
               performSearch();
           }
       });

       document.getElementById('logout-btn').addEventListener('click', function () {
           alert('You have been logged out.');
           window.location.href = 'login.html';
       });
   </script>
   <script src="serach.js"></script>
   <script>
       const playlists = JSON.parse(localStorage.getItem('moodTunesPlaylists')) || {}; // Retrieve playlists from localStorage
       const likedSongs = JSON.parse(localStorage.getItem('likedSongs')) || []; // Retrieve liked songs from localStorage

       // Initialize liked state for songs
       document.querySelectorAll('.like-song-btn').forEach(button => {
           const songCard = button.closest('.card');
           const songTitle = songCard.dataset.songTitle;
           const songArtist = songCard.dataset.songArtist;

           const isSongAlreadyLiked = likedSongs.some(
               song => song.title === songTitle && song.artist === songArtist
           );

           if (isSongAlreadyLiked) {
               button.classList.add('liked');
               button.innerHTML = '<i class="fa-solid fa-heart"></i>';
           }
       });

       document.querySelectorAll('.add-to-playlist-btn').forEach(button => {
           button.addEventListener('click', event => {
               event.stopPropagation();
               const songCard = button.closest('.card');
               const songTitle = songCard.dataset.songTitle;
               const songArtist = songCard.dataset.songArtist;
               const songSrc = songCard.dataset.songSrc;

               const playlistName = prompt("Enter playlist name (existing or new):");
               if (playlistName) {
                   if (!playlists[playlistName]) {
                       playlists[playlistName] = { name: playlistName, songs: [] };
                   }
                   const isSongAlreadyInPlaylist = playlists[playlistName].songs.some(
                       song => song.title === songTitle && song.artist === songArtist
                   );
                   if (!isSongAlreadyInPlaylist) {
                       playlists[playlistName].songs.push({ title: songTitle, artist: songArtist, src: songSrc });
                       alert(`Added "${songTitle}" to the playlist "${playlistName}".`);
                   } else {
                       alert(`"${songTitle}" is already in the playlist "${playlistName}".`);
                   }
                   localStorage.setItem('moodTunesPlaylists', JSON.stringify(playlists)); // Save playlists to localStorage
               }
           });
       });

       document.querySelectorAll('.like-song-btn').forEach(button => {
           button.addEventListener('click', event => {
               event.stopPropagation();
               const songCard = button.closest('.card');
               const songTitle = songCard.dataset.songTitle;
               const songArtist = songCard.dataset.songArtist;
               const songSrc = songCard.dataset.songSrc;

               button.classList.toggle('liked');
               if (button.classList.contains('liked')) {
                   button.innerHTML = '<i class="fa-solid fa-heart"></i>';
                   const isSongAlreadyLiked = likedSongs.some(
                       song => song.title === songTitle && song.artist === songArtist
                   );
                   if (!isSongAlreadyLiked) {
                       likedSongs.push({ title: songTitle, artist: songArtist, src: songSrc });
                   }
               } else {
                   button.innerHTML = '<i class="fa-regular fa-heart"></i>';
                   const index = likedSongs.findIndex(
                       song => song.title === songTitle && song.artist === songArtist
                   );
                   if (index !== -1) {
                       likedSongs.splice(index, 1);
                   }
               }
               localStorage.setItem('likedSongs', JSON.stringify(likedSongs)); // Save liked songs to localStorage
           });
       });
   </script>
</body>
</html>